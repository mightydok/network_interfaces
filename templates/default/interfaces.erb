<% @entries.each do |entry| %>
<% if entry['hotplug'] -%>
allow-hotplug <%= entry['device'] %>
<% end %>
iface <%= entry['device'] %> <%= entry['family'] %> <%= entry['type'] %>
<% if entry['address'] -%>
  address <%= entry['address'] %>
<% end %>
<% if entry['netmask'] -%>
  netmask <%= entry['netmask'] %>
<% end %>
<% if entry['broadcast'] -%>
  broadcast <%= entry['broadcast'] %>
<% end %>
<% if entry['gateway'] -%>
  gateway <%= entry['gateway'] %>
<% end %>
<% if entry['vlan_dev'] -%>
  vlan_raw_device <%= entry['vlan_dev'] %>
<% end %>
<% if entry['bridge_ports'] -%>
  bridge_ports<% entry['bridge_ports'].each do |port| %> <%= port %><% end %>
<% end %>
<% unless entry['bridge_stp'].nil? -%>
  bridge_stp <%= entry['bridge_stp'] ? "on" : "off" %>
<% end %>
<% if entry['bond_slaves'] -%>
  bond-slaves<% entry['bond_slaves'].each do |iface| %> <%= iface %><% end %>
<% end %>
<% if entry['bond_mode'] -%>
  bond-mode <%= entry['bond_mode'] %>
<% end %>
<% if entry['metric'] -%>
  metric <%= entry['metric'] %>
<% end %>
<% if entry['mtu'] -%>
  mtu <%= entry['mtu'] %>
<% end %>
<% entry['up_down_cmd'].each do |order, cmds| -%>
<%   cmds.flatten.each do |cmd| -%>
  <%= order %> <%= cmd %>
<%   end %>
<% end %>
<% if entry['custom'] %>
  <% entry['custom'].sort_by{ |instruc, command| instruc }.each do |instruc, command| -%>
  <%= instruc %> <%= command %>
  <% end %>
<% end %>
<% end %>

